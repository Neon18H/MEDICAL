{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-lg-8">
    <div class="card shadow-sm border-0 mb-3">
      <div class="card-body">
        <canvas id="simCanvas" width="640" height="420" class="border rounded w-100"></canvas>
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card shadow-sm border-0 mb-3">
      <div class="card-body">
        <h5 class="fw-bold" id="procedureTitle">Procedimiento</h5>
        <div id="stepsList" class="small"></div>
        <hr />
        <div id="checklist" class="small"></div>
        <hr />
        <div class="d-flex justify-content-between">
          <span>Cronómetro</span>
          <span id="timer">00:00</span>
        </div>
        <div class="mt-2">
          <strong>Errores</strong>
          <ul id="errors" class="small"></ul>
        </div>
        <button id="finishAttempt" class="btn btn-success w-100 mt-3">Finalizar intento</button>
      </div>
    </div>
    <div class="card shadow-sm border-0">
      <div class="card-body">
        <h6 class="fw-bold">Acciones quirúrgicas</h6>
        <div class="d-grid gap-2">
          <button class="btn btn-outline-primary action-btn" data-action="CUT">CUT (C)</button>
          <button class="btn btn-outline-primary action-btn" data-action="SUTURE">SUTURE (S)</button>
          <button class="btn btn-outline-primary action-btn" data-action="GRAB">GRAB (G)</button>
          <button class="btn btn-outline-primary action-btn" data-action="RELEASE">RELEASE (R)</button>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script>
  window.App.startSimulator({{ procedure_id }});
</script>
{% endblock %}
